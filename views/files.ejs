<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="/style.css" />
        <title>Files</title>
    </head>
    <body>
        <div class="header">Content of <%= fileName %></div>
        <div class="file-control">
            <a href="/"><button type="button" class="to-main-page-button">To main page</button></a>
        </div>
        <div class="upload-file-form-row">
            <form action="/folders/<%= folderId %>/files/create" enctype="multipart/form-data" method="POST">
                <label for="uploadFile">Choose a file to upload:</label>
                <input type="file" name="uploadFile" id="uploadFile" required />
                <button type="submit" class="upload-file-button-submit">Upload file</button>
            </form>
        </div>
        <div>
            <% if (locals.files && files.length > 0) { %>
                <div class="files-container">
                    <% files.forEach((file) => { %>
                        <div class="file-item">
                            <div class="file-name">File: <%= file.name %></div>
                            <div class="file-size">Size: <%= file.size %></div>
                            <div class="file-uploaded-date">Uploaded: <%= file.dateOfCreation.toLocaleDateString() %> <%= file.dateOfCreation.toLocaleTimeString() %></div>
                            <div class="file-control-row">
                                <a href="/folders/<%= folderId %>/files/<%= file.id %>/download">
                                    <button type="button" class="download-file-button">Download file</button>
                                </a>
                            </div>
                            <div class="file-control-row">
                                <form action="/folders/<%= folderId %>/files/<%= file.id %>/delete" method="POST">
                                    <button type="submit" onclick="return confirm('Are you sure you want to delete this folder?')" class="delete-file-button">Delete file</button>
                                </form>
                            </div>
                        </div>
                    <% }); %>
                </div>
            <% } else { %>
                <div class="no-files-field">This folder is empty.</div>
            <% }; %>
        </div>
    </body>
</html>