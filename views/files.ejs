<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Files</title>
    </head>
    <body>
        <h1>Content of <%= fileName %></h1>
        <div><a href="/">To main page</a></div>
        <div>
            <form action="/folders/<%= folderId %>/files/create" enctype="multipart/form-data" method="POST">
                <label for="uploadFile">Choose a file to upload:</label>
                <input type="file" name="uploadFile" id="uploadFile" required />
                <button type="submit">Upload file</button>
            </form>
        </div>
        <div>
            <% if (locals.files && files.length > 0) { %>
                <div class="files-container">
                    <% files.forEach((file) => { %>
                        <div>
                            <div><%= file.name %></div>
                            <div>Size: <%= file.size %></div>
                            <div>Uploaded: <%= file.dateOfCreation.toLocaleDateString() %> <%= file.dateOfCreation.toLocaleTimeString() %></div>
                            <div>
                                <a href="/folders/<%= folderId %>/files/<%= file.id %>/download">
                                    <button type="button">Download file</button>
                                </a>
                            </div>
                            <div>
                                <form action="/folders/<%= folderId %>/files/<%= file.id %>/delete" method="POST">
                                    <button type="submit" onclick="return confirm('Are you sure you want to delete this folder?')">Delete file</button>
                                </form>
                            </div>
                        </div>
                    <% }); %>
                </div>
            <% } else { %>
                <div>This folder is empty.</div>
            <% }; %>
        </div>
    </body>
</html>